!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDom=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(6),i=n(4);t.parseDom=function e(t,n,a){var c=!1;if(t.attributes&&Array.prototype.forEach.call(t.attributes,function(e){var u=e.nodeName,s=e.nodeValue;if("style"===u){if("{"===s[0]){var l=(0,o.parse)(s);"undefined"==typeof l.update?t.setStyle(t,l):(0,i.bindNode)(t,"style",n,l,{parentWatcher:a})}}else if("for"===u){var f=document.createComment("for");t.parentNode.insertBefore(f,t);var d=document.createComment("end");t.nextSibling?t.parentNode.insertBefore(d,t.nextSibling):t.parentNode.appendChild(d);var p=t.parentNode.removeChild(t);p.removeAttribute("for");var h=/(.*)(\s+)in(\s+)(.*)/.exec(s),y=h[1],v=h[4],b=(0,o.parse)(v);(0,i.bindNode)(f,"for",n,b,{itemExpression:y,forAnchorStart:f,forAnchorEnd:d,tmpl:p,parentWatcher:a}),c=!0}else if("click"===u)!function(){var e=(0,o.parse)(s);t.addEventListener("click",function(){e.update.call(n)},!1)}();else if("model"===u)!function(){var e=(0,o.parse)(s);t.addEventListener("input",function(){n.scope[e.expression.replace("scope.","")]=t.value}),(0,i.bindNode)(t,"value",n,e,{parentWatcher:a})}();else{var m=(0,o.parseInterpolation)(s);"object"!==("undefined"==typeof m?"undefined":r(m))?t.setAttribute(u,m):(0,i.bindNode)(t,"attr",n,m,{parentWatcher:a})}}),3===t.nodeType){var u=t.nodeValue.trim();if(u.length){var s=(0,o.parseInterpolation)(t.nodeValue);"object"!==("undefined"==typeof s?"undefined":r(s))?t.textContent=s:(0,i.bindNode)(t,"text",n,s,{parentWatcher:a})}}if(1===t.nodeType){var l=Component.list[t.tagName.toLowerCase()];l&&l.tmpl&&(t.innerHTML=l.tmpl)}if(!c){var f=n;if(1===t.nodeType){var d=Component.list[t.tagName.toLowerCase()];d&&(f=new d,f.tmpl&&(t.innerHTML=f.tmpl),f.props&&!function(){var e={};f.props.forEach(function(r){Object.defineProperty(e,r,{get:function(){var e=n[t.getAttribute(r)];return"function"==typeof e?e.bind(n):n[t.getAttribute(r)]},set:function(e){console.error("direct modify parents' data")},enumerable:!0,configurable:!0})}),f.props=e,n.isIntermediate&&(f.__parent=n)}())}for(var p=t.childNodes[0];p;)e(p,f,a),p=p.nextSibling}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwatch=t.bindWatcherOnSetter=t.triggerWatcher=t.Watchers=t.setStyle=void 0;var r=n(5);t.setStyle=function(e,t){Object.assign(e.style,t)},t.Watchers={root:{},currentWatcherStack:[]},t.triggerWatcher=function(e){console.group("triggerWatcher",e.expression);var t=e.val();if(e.isModel)e.update(void 0,t||""),e.oldV=t;else if(e.isArray||0===t){if(e.isArray){var n=e.oldV||[];(0,r.diff)(n,t).forEach(function(t){(1===t[0]?e.update.add:e.update.remove)(t[1],t[2],t[3])}),e.oldV=t.slice(0)}}else e.update(0,t),e.oldV=t;console.groupEnd()},t.bindWatcherOnSetter=function(e,t){e.locations=e.locations||new Set,e.locations.has(t)||e.locations.add(t),t.has(e)||t.add(e)},t.unwatch=function(e){var t=e.parent.childs;t.splice(t.indexOf(e),1),e.locations.forEach(function(t){t.delete(e)})}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=n(7),c=function(){function e(t){r(this,e),Object.assign(this,t),(0,a.defineGetterSetter)(this.scope),e.instances.push(this)}return o(e,null,[{key:"render",value:function(e,t){var n=new e;t.innerHTML=n.tmpl,(0,i.parseDom)(t,n)}}]),e}();c.instances=[],t.default=c},function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function c(){v&&h&&(v=!1,h.length?y=h.concat(y):b=-1,y.length&&u())}function u(){if(!v){var e=i(c);v=!0;for(var t=y.length;t;){for(h=y,y=[];++b<t;)h&&h[b].run();b=-1,t=y.length}h=null,v=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var f,d,p=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(e){d=o}}();var h,y=[],v=!1,b=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];y.push(new s(e,t)),1!==y.length||v||i(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindNode=void 0;var r=n(1),o=n(0);t.bindNode=function(e,t,n,i,a){var c=a.parentWatcher||r.Watchers.root,u=a.parentWatcher&&a.parentWatcher.isArray?a.parentWatcher:a.closestArrayWatcher,s=null;switch(t){case"text":s={node:e,component:n,closestArrayWatcher:u,expression:i.expression,val:i.update.bind(n),update:function(e,t){this.node.textContent=t}};break;case"attr":s={node:e,component:n,closestArrayWatcher:u,expression:i.expression,val:i.update.bind(n),update:function(e,t){this.node.setAttribute(a.name,t)}};break;case"style":s={node:e,component:n,closestArrayWatcher:u,expression:i.expression,val:i.update.bind(n),update:function(e,t){(0,r.setStyle)(this.node,t)}};break;case"value":s={node:e,component:n,closestArrayWatcher:u,expression:i.expression,val:i.update.bind(n),update:function(e,t){this.node.value=t},isModel:!0};break;case"for":s={expression:i.expression,closestArrayWatcher:u,isArray:!0,component:n,val:i.update.bind(n),update:{add:function(e,t,r){console.log("for:add "+t+" to "+r);for(var c=a.forAnchorEnd,u=a.forAnchorStart,l=c.parentNode,f=a.tmpl,d=0,p=u;d<=r;){if(d>=t){var h=f.cloneNode("deep"),y=Object.create(n);y.__index=d,Object.defineProperty(y,"item",{get:function(){var e=i.update.call(n)[this.__index];return e},set:function(e){console.error("direct modify parents' data")},enumerable:!0,configurable:!0}),y.isIntermediate=!0,(0,o.parseDom)(h,y,s),l.insertBefore(h,p.nextSibling||c)}p=p.nextSibling,d++}},remove:function(e,t,n){console.group("for:remove "+t+" to "+n);for(var o=a.forAnchorEnd,i=o.parentNode,c=t,u=(o.parentNode.childNodes[c],s.childs.length);c<u-n+t-1;)console.log("set index",c+n-t+1,"to",c),s.childs[c+n-t+1].component.__parent.__index=c,c++;c=e.length;for(var l=o;c>=t-1;)c<=n-1&&(console.log("remove dom",c),i.removeChild(l.nextSibling),console.log("unwatch",c),(0,r.unwatch)(s.childs[c+1])),l=l.previousSibling,c--;console.groupEnd()}}}}c.childs||(c.childs=[]),s.parent=c,c.childs.push(s),r.Watchers.currentWatcherStack.unshift(s),(0,r.triggerWatcher)(s),r.Watchers.currentWatcherStack.shift()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.diff=void 0;var o=n(8),i=r(o);t.diff=function(e,t){i.default.group("diff",e,t);for(var n=0,r=e.length,o=0,a=t.length,c=[];n<r&&o<a;)if(e[n]===t[o])n++,o++;else{var u=e.indexOf(t[o]);if(u>n)c.push([-1,e,n,u-1]),n=u+1,o++;else{var s=t.indexOf(e[n]);if(!(s>o))break;c.push([1,t,o,s-1]),n++,o=s+1}}return n<r&&c.push([-1,e,n,r-1]),o<a&&c.push([1,t,o,a-1]),i.default.groupEnd(),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.parse=function(e){return{expression:e,update:new Function("","with(this){ return "+e+"}")}};t.parseInterpolation=function(e){for(var t=0,n=0,o=[],i=!1;n<e.length;)"{"===e[n]?(i=!0,n>t&&o.push(e.slice(t,n)),t=n+1):"}"===e[n]&&(n>t&&o.push(r(e.slice(t,n))),t=n+1),n++;if(n>t&&o.push(e.slice(t,n)),i){new Set;return{expression:o.reduce(function(e,t){return"string"!=typeof t?e+" "+t.expression:e+" "+t},""),update:function(){var e=this;return o.reduce(function(t,n){return"string"!=typeof n?t+n.update.call(e):t+n},"")}}}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineGetterSetter=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1);["push","pop","shift","unshift","splice"].forEach(function(e){var t=Array.prototype[e];Array.prototype[e]=function(){this.__parent?(i(arguments,this.__parent,this.__key),t.apply(this,arguments),this.__parent[this.__key]=this):t.apply(this,arguments)}});var i=t.defineGetterSetter=function e(t,n,i){var a="undefined"==typeof t?"undefined":r(t),c=new Set;["object"].includes(a)&&null!==t&&!t.__isGetterSetter&&(Array.isArray(t)?t.forEach(function(t,n){e(t)}):Object.keys(t).forEach(function(n){var i=t[n];Object.defineProperty(t,n,{get:function(){if(o.Watchers.currentWatcherStack.length){var e=o.Watchers.currentWatcherStack[0],t=e.closestArrayWatcher;Array.isArray(i)&&t&&t!==e||(console.log("bind "+e.expression+" to "+n),(0,o.bindWatcherOnSetter)(e,c))}return i},set:function(t){e(t,i.__parent,i.__key),i=t;for(var n=c[Symbol.iterator](),r=null;r=n.next().value;)(0,o.triggerWatcher)(r)},enumerable:!0,configurable:!0}),"object"===("undefined"==typeof i?"undefined":r(i))&&null!==t&&e(i,t,n)}),n&&(t.__parent=n,t.__key=i),Object.defineProperty(t,"__isGetterSetter",{value:!0,writable:!1,enumerable:!1}))}},function(e,t,n){"use strict";(function(e){function n(){}Object.defineProperty(t,"__esModule",{value:!0});var r=console;"undefined"!=typeof e&&(r={group:n,groupEnd:n,log:n}),t.default=r}).call(t,n(3))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(2),i=r(o);window.Component=i.default}]);