!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),a=r(7),c=function(){function e(){n(this,e)}return o(e,null,[{key:"create",value:function(t,r){var n={create:function(){var t=Object.create(r);return t.scope&&(t.scope=t.scope(),(0,a.defineGetterSetter)(t.scope)),e.instances.push(t),t}};return e.list[t]=n,n}},{key:"render",value:function(t,r){var n=e.list[t].create();r.innerHTML=n.tmpl,(0,i.parseDom)(r,n)}}]),e}();c.instances=[],c.list={},t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseDom=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(6),a=r(4),c=r(0),u=n(c);t.parseDom=function e(t,r,n){var c=!1;if(t.attributes&&Array.prototype.forEach.call(t.attributes,function(e){var u=e.nodeName,s=e.nodeValue;if("style"===u){if("{"===s[0]){var l=(0,i.parse)(s);"undefined"==typeof l.update?t.setStyle(t,l):(0,a.bindNode)(t,"style",r,l,{parentWatcher:n})}}else if("for"===u){var f=document.createComment("for");t.parentNode.insertBefore(f,t);var d=document.createComment("end");t.nextSibling?t.parentNode.insertBefore(d,t.nextSibling):t.parentNode.appendChild(d);var p=t.parentNode.removeChild(t);p.removeAttribute("for");var h=/(.*)(\s+)in(\s+)(.*)/.exec(s),y=h[1],v=h[4],b=(0,i.parse)(v);(0,a.bindNode)(f,"for",r,b,{itemExpression:y,forAnchorStart:f,forAnchorEnd:d,tmpl:p,parentWatcher:n}),c=!0}else if(["click","keypress"].includes(u))!function(){var e=(0,i.parse)(s);t.addEventListener(u,function(t){e.update.call(r)(t)},!1)}();else if("model"===u)!function(){var e=(0,i.parse)(s);t.addEventListener("input",function(){r.scope[e.expression.replace("scope.","")]=t.value}),(0,a.bindNode)(t,"value",r,e,{parentWatcher:n})}();else{var m=(0,i.parseInterpolation)(s);"object"!==("undefined"==typeof m?"undefined":o(m))?t.setAttribute(u,m):(0,a.bindNode)(t,"attr",r,m,{parentWatcher:n})}}),3===t.nodeType){var s=t.nodeValue.trim();if(s.length){var l=(0,i.parseInterpolation)(t.nodeValue);"object"!==("undefined"==typeof l?"undefined":o(l))?t.textContent=l:(0,a.bindNode)(t,"text",r,l,{parentWatcher:n})}}if(1===t.nodeType){var f=u.default.list[t.tagName.toLowerCase()];f&&f.tmpl&&(t.innerHTML=f.tmpl)}if(!c){var d=r;if(1===t.nodeType){var p=u.default.list[t.tagName.toLowerCase()];p&&(d=p.create(),d.tmpl&&(t.innerHTML=d.tmpl),d.props&&!function(){var e={};d.props.forEach(function(n){Object.defineProperty(e,n,{get:function(){var e=r[t.getAttribute(n)];return"function"==typeof e?e.bind(r):r[t.getAttribute(n)]},set:function(e){console.error("direct modify parents' data")},enumerable:!0,configurable:!0})}),d.props=e,r.isIntermediate&&(d.__parent=r)}())}for(var h=t.childNodes[0];h;)e(h,d,n),h=h.nextSibling}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwatch=t.bindWatcherOnSetter=t.triggerWatcher=t.Watchers=t.setStyle=void 0;var n=r(5);t.setStyle=function(e,t){Object.assign(e.style,t)},t.Watchers={root:{},currentWatcherStack:[]},t.triggerWatcher=function(e){console.group("triggerWatcher",e.expression);var t=e.val();if(e.isModel)e.update(void 0,t||""),e.oldV=t;else if(e.isArray||0===t){if(e.isArray){var r=e.oldV||[];(0,n.diff)(r,t).forEach(function(t){(1===t[0]?e.update.add:e.update.remove)(t[1],t[2],t[3])}),e.oldV=t.slice(0)}}else e.update(0,t),e.oldV=t;console.groupEnd()},t.bindWatcherOnSetter=function(e,t){e.locations=e.locations||new Set,e.locations.has(t)||e.locations.add(t),t.has(e)||t.add(e)},t.unwatch=function(e){var t=e.parent.childs;t.splice(t.indexOf(e),1),e.locations.forEach(function(t){t.delete(e)})}},function(e,t,r){"use strict";function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function c(){v&&h&&(v=!1,h.length?y=h.concat(y):b=-1,y.length&&u())}function u(){if(!v){var e=i(c);v=!0;for(var t=y.length;t;){for(h=y,y=[];++b<t;)h&&h[b].run();b=-1,t=y.length}h=null,v=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var f,d,p=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(e){d=o}}();var h,y=[],v=!1,b=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new s(e,t)),1!==y.length||v||i(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindNode=void 0;var n=r(2),o=r(1);t.bindNode=function(e,t,r,i,a){var c=a.parentWatcher||n.Watchers.root,u=a.parentWatcher&&a.parentWatcher.isArray?a.parentWatcher:a.closestArrayWatcher,s=null;switch(t){case"text":s={node:e,component:r,closestArrayWatcher:u,expression:i.expression,val:i.update.bind(r),update:function(e,t){this.node.textContent=t}};break;case"attr":s={node:e,component:r,closestArrayWatcher:u,expression:i.expression,val:i.update.bind(r),update:function(e,t){this.node.setAttribute(a.name,t)}};break;case"style":s={node:e,component:r,closestArrayWatcher:u,expression:i.expression,val:i.update.bind(r),update:function(e,t){(0,n.setStyle)(this.node,t)}};break;case"value":s={node:e,component:r,closestArrayWatcher:u,expression:i.expression,val:i.update.bind(r),update:function(e,t){this.node.value=t},isModel:!0};break;case"for":s={expression:i.expression,closestArrayWatcher:u,isArray:!0,component:r,val:i.update.bind(r),update:{add:function(e,t,n){console.log("for:add "+t+" to "+n);for(var c=a.forAnchorEnd,u=a.forAnchorStart,l=c.parentNode,f=a.tmpl,d=0,p=u;d<=n;){if(d>=t){var h=f.cloneNode("deep"),y=Object.create(r);y.__index=d,Object.defineProperty(y,"item",{get:function(){var e=i.update.call(r)[this.__index];return e},set:function(e){console.error("direct modify parents' data")},enumerable:!0,configurable:!0}),y.isIntermediate=!0,(0,o.parseDom)(h,y,s),l.insertBefore(h,p.nextSibling||c)}p=p.nextSibling,d++}},remove:function(e,t,r){console.group("for:remove "+t+" to "+r);for(var o=a.forAnchorEnd,i=o.parentNode,c=t,u=(o.parentNode.childNodes[c],s.childs.length);c<u-r+t-1;)console.log("set index",c+r-t+1,"to",c),s.childs[c+r-t+1].component.__parent.__index=c,c++;c=e.length;for(var l=o;c>=t-1;)c<=r-1&&(console.log("remove dom",c),i.removeChild(l.nextSibling),console.log("unwatch",c),(0,n.unwatch)(s.childs[c+1])),l=l.previousSibling,c--;console.groupEnd()}}}}c.childs||(c.childs=[]),s.parent=c,c.childs.push(s),n.Watchers.currentWatcherStack.unshift(s),(0,n.triggerWatcher)(s),n.Watchers.currentWatcherStack.shift()}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.diff=void 0;var o=r(8),i=n(o);t.diff=function(e,t){i.default.group("diff",e,t);for(var r=0,n=e.length,o=0,a=t.length,c=[];r<n&&o<a;)if(e[r]===t[o])r++,o++;else{var u=e.indexOf(t[o]);if(u>r)c.push([-1,e,r,u-1]),r=u+1,o++;else{var s=t.indexOf(e[r]);if(!(s>o))break;c.push([1,t,o,s-1]),r++,o=s+1}}return r<n&&c.push([-1,e,r,n-1]),o<a&&c.push([1,t,o,a-1]),i.default.groupEnd(),c}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.parse=function(e){return{expression:e,update:new Function("","with(this){ return "+e+"}")}};t.parseInterpolation=function(e){for(var t=0,r=0,o=[],i=!1;r<e.length;)"{"===e[r]?(i=!0,r>t&&o.push(e.slice(t,r)),t=r+1):"}"===e[r]&&(r>t&&o.push(n(e.slice(t,r))),t=r+1),r++;if(r>t&&o.push(e.slice(t,r)),i){new Set;return{expression:o.reduce(function(e,t){return"string"!=typeof t?e+" "+t.expression:e+" "+t},""),update:function(){var e=this;return o.reduce(function(t,r){return"string"!=typeof r?t+r.update.call(e):t+r},"")}}}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineGetterSetter=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(2);["push","pop","shift","unshift","splice"].forEach(function(e){var t=Array.prototype[e];Array.prototype[e]=function(){this.__parent?(i(arguments,this.__parent,this.__key),t.apply(this,arguments),this.__parent[this.__key]=this):t.apply(this,arguments)}});var i=t.defineGetterSetter=function e(t,r,i){var a="undefined"==typeof t?"undefined":n(t),c=new Set;["object"].includes(a)&&null!==t&&!t.__isGetterSetter&&(Array.isArray(t)?t.forEach(function(t,r){e(t)}):Object.keys(t).forEach(function(r){var i=t[r];Object.defineProperty(t,r,{get:function(){if(o.Watchers.currentWatcherStack.length){var e=o.Watchers.currentWatcherStack[0],t=e.closestArrayWatcher;Array.isArray(i)&&t&&t!==e||(console.log("bind "+e.expression+" to "+r),(0,o.bindWatcherOnSetter)(e,c))}return i},set:function(t){e(t,i.__parent,i.__key),i=t;for(var r=c[Symbol.iterator](),n=null;n=r.next().value;)(0,o.triggerWatcher)(n)},enumerable:!0,configurable:!0}),"object"===("undefined"==typeof i?"undefined":n(i))&&null!==t&&e(i,t,r)}),r&&(t.__parent=r,t.__key=i),Object.defineProperty(t,"__isGetterSetter",{value:!0,writable:!1,enumerable:!1}))}},function(e,t,r){"use strict";(function(e){function r(){}Object.defineProperty(t,"__esModule",{value:!0});var n=console;"undefined"!=typeof e&&(n={group:r,groupEnd:r,log:r}),t.default=n}).call(t,r(3))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(0),i=n(o);window.LSDom={Component:i.default}}]);
